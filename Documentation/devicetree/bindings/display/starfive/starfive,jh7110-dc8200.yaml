# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/display/starfive/starfive,jh7110-dc8200.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: StarFive display controller

description:
  The StarFive SoC uses the display controller based on Verisilicon IP
  to transfer the image data from a video memory buffer to an external
  LCD interface.

maintainers:
  - Keith Zhao <keith.zhao@starfivetech.com>

properties:
  compatible:
    const: starfive,jh7110-dc8200

  reg:
    minItems: 1
    items:
      - description:
          host interface
      - description:
          display physical base address and length.

  interrupts:
    items:
      - description: The interrupt will be generated when DC finish one frame

  clocks:
    items:
      - description: Clock for display system noc bus.
      - description: Pixel clock for display channel 0.
      - description: Pixel clock for display channel 1.
      - description: Core clock for display controller.
      - description: Clock for axi bus to access ddr.
      - description: Clock for ahb bus to R/W the phy regs.
      - description: External HDMI pixel clock.
      - description: Parent clock for pixel clock

  clock-names:
    items:
      - const: noc_bus
      - const: channel0
      - const: channel1
      - const: dc_core
      - const: axi_core
      - const: ahb
      - const: hdmi_tx
      - const: dc_parent

  resets:
    items:
      - description: Reset for axi bus.
      - description: Reset for ahb bus.
      - description: Core reset of display controller.

  reset-names:
    items:
      - const: axi
      - const: ahb
      - const: core

  port:
    $ref: /schemas/graph.yaml#/properties/port

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names
  - resets
  - reset-names
  - port

additionalProperties: false

examples:
  - |
    dc8200: lcd-controller@29400000 {
        compatible = "starfive,jh7110-dc8200";
        reg = <0x29400000 0x100>, <0x29400800 0x2000>;
        interrupts = <95>;
        clocks = <&syscrg 60>,
               <&voutcrg 7>,
               <&voutcrg 8>,
               <&voutcrg 4>,
               <&voutcrg 5>,
               <&voutcrg 6>,
               <&hdmitx0_pixelclk>,
               <&voutcrg 1>;
        clock-names = "noc_bus", "channel0", "channel1",
                      "dc_core", "axi_core", "ahb",
                      "hdmi_tx","dc_parent";
        resets = <&voutcrg 0>, <&voutcrg 1>, <&voutcrg 2>;
        reset-names = "axi", "ahb", "core";
        dc_out: port {
            #address-cells = <1>;
            #size-cells = <0>;
            dc_out_hdmi: endpoint@0 {
                reg = <0>;
                remote-endpoint = <&hdmi_in_dc>;
            };
        };
    };
